$(document).ready(function(){function e(e){$(e.target).prev(".panel-heading").find("i.indicator").toggleClass("glyphicon-chevron-down glyphicon-chevron-up")}function n(e){$.when($.ajax("data/family/"+e+".json"),$.ajax("templates/person.html"),$.ajax("templates/family.html"),$.ajax("templates/event.html"),$.ajax("templates/children.html")).done(function(e,t,n,r,i){data=e[0].data;t=Hogan.compile(t[0]);n=Hogan.compile(n[0]);r=Hogan.compile(r[0]);var s=new Array,o=new Object;console.log(data);$.each(data.spouses,function(e,t){t.husband.gender=t.husband.gender.toLowerCase();!t.husband.name==""&&(t.husband.name="Unknown");t.wife.gender=t.wife.gender.toLowerCase();if(t.event){t.event.type=t.event.type.toLowerCase();t.event.type=t.event.type.charAt(0).toUpperCase()+t.event.type.slice(1)}if(t.children){var r=new Array;$.each(this.children,function(e,n){n.gender&&(n.gender=n.gender.toLowerCase());t.children[e]=n})}$(".spouses-children").append(n.render(t))});$.each(data.parents,function(e,t){t.husband.gender=t.husband.gender.toLowerCase();t.husband.name||(t.husband.name="Unknown");t.wife.gender=t.wife.gender.toLowerCase();t.wife.name||(t.wife.name="Unknown");if(t.event){t.event.type=t.event.type.toLowerCase();t.event.type=t.event.type.charAt(0).toUpperCase()+t.event.type.slice(1)}if(t.children){var r=new Array;$.each(this.children,function(e,n){n.gender&&(n.gender=n.gender.toLowerCase());t.children[e]=n})}$(".parents-children").append(n.render(t)).fadeIn()});return!0})}$('a[rel="external"]').attr("target","_blank");$(document).tooltip({selector:"[data-toggle=tooltip]",container:"body"});$("a.panel-collapse").click(function(){$(this).children().toggleClass("fa-chevron-down fa-chevron-up");$(this).closest(".panel-heading").next().slideToggle({duration:200});$(this).closest(".panel-heading").toggleClass("rounded-bottom");return!1});$(".familyGroup").on("hidden.bs.collapse",e);$(".familyGroup").on("shown.bs.collapse",e);$(".tree-family a").on("click",function(e){e.preventDefault();return!1});var t="KWZH-X9C";window.location.hash&&(t=window.location.hash.replace("#",""));n(t);$("#personSelect a").click(function(){window.location.hash=$(this).attr("href");location.reload()})});